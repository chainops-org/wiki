Платежи облегчаются за счет поддержания баланса счета в смарт-контракте сети ssv, который ведет баланс для всех участников сети.


Аккаунты, созданные при регистрации валидаторов и операторов в сети, доступны и принадлежат тому адресу кошелька, который передал транзакцию. 

Это означает, что адрес является владельцем учетной записи, что позволяет ему управлять своим балансом и выбранными валидаторами/операторами.

Все остатки на счетах объединяются в смарт-контракте сети SSV, чтобы обеспечить расчет потоков платежей между участниками сети. 

Потоки поддерживаются путем отслеживания накопленных депозитов, снятий, доходов и расходов каждого пользователя, которые формируют баланс их счета.

Компоненты баланса рассчитываются по набору формул (изложенных ниже) каждый раз, когда происходит событие, влияющее на учетную запись этого пользователя. 

Каждый раз, когда происходит такое событие, компоненты баланса рассчитываются задним числом до текущего состояния, и делается новый снимок для использования в будущих расчетах.

![Alt text](https://github.com/chainops-org/wiki/blob/master/docs/ssv.network/protocol/pasted_image_0111.jpg)


Баланс счета состоит из 3 переменных и рассчитывается по:

                                                balance = d + r - e - w
                                                          
Где: 
* d - депозиты 
* r - доходы
* e - расходы 
* w - снятие средств


## Депозиты и Снятие средств ##

Чистые переводы депозитов и снятия средств, произведенные на баланс учетной записи пользователя.

## Доход ## 

Заработок, полученный операторами в качестве оплаты от стейкеров за работу своих валидаторов.

* Доход рассчитывается по сумме доходов от всех операторов


![Alt text](https://github.com/chainops-org/wiki/blob/master/docs/ssv.network/protocol/%D0%A2%D0%BE%D0%BA%D0%B5%D0%BD%D0%BE%D0%BC%D0%B8%D0%BA%D0%B0/%D1%84%D0%BE%D1%80%D0%BC%D1%83%D0%BB%D0%B0.png)

Доход каждого оператора рассчитывается по формуле:

![Alt text](https://github.com/chainops-org/wiki/blob/master/docs/ssv.network/protocol/%D0%A2%D0%BE%D0%BA%D0%B5%D0%BD%D0%BE%D0%BC%D0%B8%D0%BA%D0%B0/formula2.png)

Где: 

* *ep* - ранее накопленный заработок
* *b*  - текущий блок
* *bp* - предыдущий блок
* *f*  - комиссия ($SSV за блок)
* *u*  - количество валидаторов, которыми управляет оператор


Доход рассчитывается для каждого оператора путем отслеживания их накопленного заработка () каждый раз, когда изменяется комиссия оператора () или при получении или потере валидатора ().


## Затраты ##

Расходы представляют собой платежи операторам за управление их валидаторами и сетевые сборы, уплачиваемые сети.


* Расходы рассчитываются по сумме платежей операторам дополнительно к начисленным сетевым сборам:

![Alt text](https://github.com/chainops-org/wiki/blob/master/docs/ssv.network/protocol/%D0%A2%D0%BE%D0%BA%D0%B5%D0%BD%D0%BE%D0%BC%D0%B8%D0%BA%D0%B0/exdex.png)



## Индексы: операторские и сетевые сборы ##

Индексы помогают отслеживать платежи в связи с текущими обновлениями сборов от сети и ее операторов.


Индексы хранятся отдельно для изменений сборов оператора и сети и представляют собой кривую изменения накопленных сборов с течением времени.

![Alt text](https://github.com/chainops-org/wiki/blob/master/docs/ssv.network/protocol/%D0%A2%D0%BE%D0%BA%D0%B5%D0%BD%D0%BE%D0%BC%D0%B8%D0%BA%D0%B0/pasted%20image%200.png)




